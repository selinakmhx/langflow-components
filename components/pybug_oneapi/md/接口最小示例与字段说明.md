# 小红书聚合接口最小输出示例与字段说明

> 说明：以下示例均基于我们本地已成功的响应，选取“最小可用字段”做示范，便于你后续自助组装。示例保留中文，字段名与接口返回保持一致。

## 通用约定
- 认证：通过 URL query 参数 `token=rrZQl9kQ`（示例值），不使用 Header。
- 成功标识：`code=0` 表示成功；`code=300` 表示 API 无效；`code=301` 表示临时失败可重试；HTTP 400 说明该版本或参数当前不满足服务端要求。
- 时间戳：`time` 为 Unix 秒级时间戳（int）。
- 分页：统一使用 `has_more`（bool）与 `cursor`（字符串，内部是 JSON 字符串）。

---

## 1) 获取用户笔记列表（/get-user-note-list/v4）

最小成功示例：

```json
{
  "code": 0,
  "data": {
    "notes": [
      {
        "id": "6904d2400000000007037b4c",
        "title": "宝宝你这么可爱 你知不知道呀",
        "desc": "...",
        "likes": 358,
        "comments_count": 7,
        "type": "video",
        "images_list": [{"url": "https://..."}],
        "user": {
          "userid": "636519f2000000001f019e57",
          "nickname": "million酱",
          "images": "https://..."
        }
      }
    ],
    "cursor": "68f879a000000000070310f7",
    "has_more": true
  }
}
```

字段说明：
- notes[].id：笔记 ID，字符串。
- title/desc：标题与正文摘要，字符串。
- likes/comments_count：点赞数与评论数，整数。
- type：内容类型（如 video/image），字符串。
- images_list[].url：图片地址（可能带裁剪与鉴权参数）。
- user.userid/nickname/images：作者 ID、昵称与头像。
- cursor/has_more：用于下一页请求的游标与是否有更多。

---

## 2) 获取笔记主评论（/get-note-comment/v2）

最小成功示例：

```json
{
  "code": 0,
  "data": {
    "comment_count": 735,
    "comments": [
      {
        "id": "67e3b63e0000000012031b7e",
        "note_id": "67deef0a000000001e001660",
        "content": "虽然他有聪明毛...",
        "sub_comment_count": 15,
        "time": 1742976574,
        "user": {
          "userid": "5b88b234a76af2000100fb25",
          "nickname": "用户已注销",
          "images": "https://..."
        }
      }
    ],
    "has_more": true,
    "cursor": "{\"cursor\":\"690989140000000037013b80\",\"index\":2}"
  }
}
```

字段说明：
- comment_count：评论总数。
- comments[].id：主评论 ID（用于获取子评论）。
- note_id：所属笔记 ID。
- content：评论文本（可能包含表情占位，如 `[doge]`）。
- sub_comment_count：该主评论下的子评论数量。
- time：评论发布时间（秒级时间戳）。
- user.*：评论作者信息。
- has_more/cursor：分页字段。

---

## 3) 获取笔记子评论（/get-note-sub-comment/v2）

最小成功示例：

```json
{
  "code": 0,
  "data": {
    "comments": [
      {
        "id": "67e3e1ab000000001e03b500",
        "note_id": "67deef0a000000001e001660",
        "content": "但它的眼神充满了智慧...",
        "time": 1742987692,
        "user": {
          "userid": "5fed7f31000000000100115e",
          "nickname": "冰火娃向前冲",
          "images": "https://..."
        },
        "target_comment": {"id": "67e3b63e0000000012031b7e"}
      }
    ],
    "has_more": true,
    "cursor": "{\"cursor\":\"67f79416000000001200b4b5\",\"index\":2}"
  }
}
```

字段说明：
- comments[].id：子评论 ID。
- target_comment.id：父评论（主评论）ID。
- 其他含义同主评论接口。

---

## 4) 搜索笔记（/search-note/v3）

最小成功示例（结构与用户笔记列表类似，返回 notes 数组）：

```json
{
  "code": 0,
  "data": {
    "notes": [
      {
        "id": "67deef0a000000001e001660",
        "title": "...",
        "desc": "...",
        "user": {"userid": "...", "nickname": "...", "images": "https://..."}
      }
    ],
    "has_more": true,
    "cursor": "{...}"
  }
}
```

---

## 5) 笔记详情（/get-note-detail/v9）

当前示例结果（失败）：

```json
{
  "timestamp": "2025-11-05T15:49:10.908+08:00",
  "status": 400,
  "error": "Bad Request",
  "path": "/api/xiaohongshu/get-note-detail/v9"
}
```

说明：
- v9 在当前请求参数或资源状态下返回 400，可能需要额外参数或受资源类型限制。短期建议使用 v4 列表的富字段替代展示。
- v7 返回 `code=301`（FAILED, RETRY），v2 返回 `code=300`（API INVALID），可暂不使用。

---

## 公共字段与格式说明
- code：整数。0=成功，300=接口无效，301=临时失败可重试。
- message：字符串。错误或提示信息。
- data：对象。成功时包含实际数据。
- recordTime：字符串或 null。记录生成时间，部分接口返回。
- has_more：布尔。是否还有更多分页数据。
- cursor：字符串（内部是 JSON 字符串）。下一页请求的游标。
- time：整数。Unix 秒级时间戳。
- user：对象，常见字段包含 `userid`（字符串）、`nickname`（字符串）、`images`（头像 URL）。
- images_list：数组，常见字段 `url`（图片地址）。

---

## 请求示例格式（带注释行）
- 文件首行保留 `//request:GET ...` 注释，例如：

```text
//request:GET http://47.117.133.51:30015/api/xiaohongshu/get-note-sub-comment/v2?token=rrZQl9kQ&commentId=...&noteId=...
```

- 第二行起为接口返回的 JSON 内容（已序列化为多行，便于阅读）。

---

## 使用建议
- 详情接口 v9 暂不可用时：可从列表 v4 中取关键展示字段（标题、封面、作者、点赞、评论数等）临时替代，评论链路使用 v2 的主评论与子评论补齐交互信息。
- 分页拉取：传回的 `cursor` 作为下一次请求的 `cursor` 参数（具体参数名按网关约定），同时检测 `has_more` 决定是否继续翻页。